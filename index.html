<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Wash Water Savings Calculator</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        body {
            background-color: #f8f9fa;
            padding-top: 2rem;
        }
        .calculator-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        /* Style for read-only fields */
        .form-control[readonly] {
            background-color: #f8f9fa;
            color: #6c757d;
            cursor: not-allowed;
        }
        /* Remove up/down arrows (spinners) from number inputs */
        /* For Chrome, Safari, Edge, Opera */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        /* For Firefox */
        input[type=number] {
            -moz-appearance: textfield;
            appearance: textfield; /* Standard property for compatibility */
        }
        .results-container {
            background-color: #e9f7fe;
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }
        .savings-highlight {
            color: #28a745;
            font-weight: bold;
        }
        h1 {
            color: #0d6efd;
            margin-bottom: 1.5rem;
        }
        .form-label {
            font-weight: 500;
        }
        .input-group-text {
            background-color: #0d6efd;
            color: white;
            border: none;
        }
        
        /* Print styles */
        @media print {
            body {
                padding: 0;
                background-color: white;
            }
            .calculator-container {
                box-shadow: none;
                padding: 0;
            }
            .form-check, #printButtonContainer > button {
                display: none !important;
            }
            .results-container {
                break-inside: avoid;
            }
            /* Company header for printed report */
            .print-header {
                display: block !important;
                margin-bottom: 20px;
            }
            /* Make sure contact info is included in print */
            #printButtonContainer {
                display: block !important;
            }
            #printButtonContainer .bg-light {
                background-color: white !important;
                border: 1px solid #dee2e6;
                margin-top: 30px !important;
            }
        }
        
        .print-header {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="calculator-container">
                    <h1 class="text-center">Car Wash Water Savings Calculator</h1>
                    
                    <form id="calculatorForm">
                        <div class="mb-3">
                            <label for="carsPerDay" class="form-label">Number of Cars Per Day</label>
                            <div class="input-group">
                                <span class="input-group-text">ðŸš—</span>
                                <input type="number" class="form-control" id="carsPerDay" min="1" required>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="waterBill" class="form-label">Monthly Water Bill ($)</label>
                            <div class="input-group">
                                <span class="input-group-text">ðŸ’§</span>
                                <input type="number" class="form-control" id="waterBill" min="0" step="0.01" required>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="sewerBill" class="form-label">Monthly Sewer Bill ($)</label>
                            <div class="input-group">
                                <span class="input-group-text">ðŸš¿</span>
                                <input type="number" class="form-control" id="sewerBill" min="0" step="0.01" required>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="gallonsPerCar" class="form-label">Current Gallons Used Per Car</label>
                            <div class="input-group">
                                <span class="input-group-text">ðŸš°</span>
                                <input type="text" class="form-control bg-light text-secondary" id="gallonsPerCar" readonly>
                                <span class="input-group-text">gal</span>
                            </div>
                            <small class="text-muted">Calculated from your water/sewer bills and car count</small>
                        </div>
                        
                        <div class="mb-3">
                            <label for="costPerCar" class="form-label">Water and Sewer Cost Per Car</label>
                            <div class="input-group">
                                <span class="input-group-text">ðŸ’°</span>
                                <input type="text" class="form-control bg-light text-secondary" id="costPerCar" readonly>
                                <span class="input-group-text">per car</span>
                            </div>
                            <small class="text-muted">(Water Bill + Sewer Bill) Ã· (Cars Per Day Ã— 30.25 Days in a Month)</small>
                        </div>
                        
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="sewerDiscount">
                            <label class="form-check-label" for="sewerDiscount">
                                I want you to petition my city to drop my sewer bill by 80% for using a full reclaim system like yours.
                            </label>
                        </div>
                        
                        <div class="results-container" id="resultsContainer">
                            <h4 class="text-center mb-4">Your Savings Summary</h4>
                            <div id="results">
                                <p class="text-center text-muted">Enter your information above to see potential savings.</p>
                            </div>
                            <div class="text-center mt-4" id="printButtonContainer" style="display: none;">
                                <button type="button" class="btn btn-primary" id="printReportBtn">
                                    <i class="bi bi-printer"></i> Print Report
                                </button>
                                <div class="mt-4 p-3 bg-light rounded">
                                    <p class="mb-1"><strong>Want to speak with us about making this report a reality?</strong></p>
                                    <p class="mb-1">Even if you already have reclaim we can install an "adder package" at a lower cost than a full unit.</p>
                                    <p class="mb-0">Call us and leave a message at <a href="tel:18012525155">1-801-252-5155</a> or email us at <a href="mailto:support@clickplumbing.com">support@clickplumbing.com</a></p>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Get all form elements
        const form = document.getElementById('calculatorForm');
        const carsPerDayInput = document.getElementById('carsPerDay');
        const waterBillInput = document.getElementById('waterBill');
        const sewerBillInput = document.getElementById('sewerBill');
        const gallonsPerCarInput = document.getElementById('gallonsPerCar');
        const costPerCarInput = document.getElementById('costPerCar');
        const sewerDiscountCheckbox = document.getElementById('sewerDiscount');
        const resultsDiv = document.getElementById('results');
        const printReportBtn = document.getElementById('printReportBtn');
        
        // Add event listeners to all inputs
        const inputs = [carsPerDayInput, waterBillInput, sewerBillInput, sewerDiscountCheckbox];
        inputs.forEach(input => {
            input.addEventListener('input', calculateSavings);
        });
        
        // Add print button functionality
        printReportBtn.addEventListener('click', function() {
            window.print();
        });
        
        // Main calculation function
        function calculateSavings() {
            // Get input values
            const carsPerDay = parseFloat(carsPerDayInput.value) || 0;
            const waterBill = parseFloat(waterBillInput.value) || 0;
            const sewerBill = parseFloat(sewerBillInput.value) || 0;
            const applySewerDiscount = sewerDiscountCheckbox.checked;
            
            // Check if we have all required inputs
            if (carsPerDay <= 0 || waterBill < 0 || sewerBill < 0) {
                resultsDiv.innerHTML = '<p class="text-center text-muted">Please enter valid values in all fields.</p>';
                return;
            }
            
            // Calculate gallons per car based on the first three variables
            // Assuming industry standard of 40 gallons per car if we can't calculate
            let gallonsPerCar = 40; // Default value
            
            // Calculate total monthly cars
            const totalMonthlyCars = carsPerDay * 30;
            
            // If we have valid bills and car count, calculate gallons per car
            if (carsPerDay > 0 && (waterBill > 0 || sewerBill > 0)) {
                // Estimate total monthly gallons based on typical water costs
                // This is a simplified calculation - in reality, would need local water rates
                // Assuming average water cost of $0.005 per gallon (including sewer)
                const totalMonthlyBill = waterBill + sewerBill;
                const estimatedTotalGallons = totalMonthlyBill / 0.005;
                gallonsPerCar = estimatedTotalGallons / totalMonthlyCars;
                
                // Round to nearest whole number for display
                gallonsPerCar = Math.round(gallonsPerCar);
                
                // Ensure minimum reasonable value (at least 20 gallons)
                gallonsPerCar = Math.max(20, gallonsPerCar);
            }
            
            // Update the gallons per car input field
            gallonsPerCarInput.value = gallonsPerCar;
            
            // Calculate water and sewer cost per car (using 30.25 days per month as requested)
            const costPerCar = (waterBill + sewerBill) / (carsPerDay * 30.25);
            costPerCarInput.value = '$' + costPerCar.toFixed(2);
            
            // Calculate total gallons
            const totalGallons = totalMonthlyCars * gallonsPerCar;
            
            // Apply sewer discount if checkbox is checked
            const effectiveSewerBill = applySewerDiscount ? sewerBill * 0.2 : sewerBill;
            
            // Calculate cost per gallon
            const costPerGallon = (waterBill + effectiveSewerBill) / totalGallons;
            
            // Calculate current and new costs
            const currentCostPerCar = costPerGallon * gallonsPerCar;
            const newCostPerCar = costPerGallon * 13; // 13 gallons with new system
            
            // Calculate savings
            const savingsPerCar = currentCostPerCar - newCostPerCar;
            const monthlySavings = savingsPerCar * totalMonthlyCars;
            
            // Format results
            const formatCurrency = (value) => '$' + value.toFixed(2);
            
            // Generate results HTML
            let resultsHTML = `
                <div class="print-header">
                    <h2>Click Plumbing Water Savings Report</h2>
                    <p>Date: ${new Date().toLocaleDateString()}</p>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Total Monthly Cars:</strong> ${totalMonthlyCars.toLocaleString()}</p>
                        <p><strong>Total Gallons Used:</strong> ${totalGallons.toLocaleString()} gallons</p>
                        <p><strong>Cost Per Car (Current):</strong> ${formatCurrency(currentCostPerCar)}</p>
                        <p><strong>Cost Per Car (New System):</strong> ${formatCurrency(newCostPerCar)}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>Per-Car Savings:</strong> <span class="savings-highlight">${formatCurrency(savingsPerCar)}</span></p>
                        <p><strong>Monthly Savings:</strong> <span class="savings-highlight">${formatCurrency(monthlySavings)}</span></p>
                        <p><strong>Annual Savings:</strong> <span class="savings-highlight">${formatCurrency(monthlySavings * 12)}</span></p>
                        ${applySewerDiscount ? '<p><strong>Note:</strong> 80% sewer discount applied</p>' : ''}
                    </div>
                </div>
                <div class="text-center mt-3">
                    <p class="mb-0"><small>Based on reducing water usage from ${gallonsPerCar} gallons to 13 gallons per car with our reclaim system.</small></p>
                    <p class="mb-0"><small>Calculated from your monthly water bill ($${waterBill}), sewer bill ($${sewerBill}), and ${carsPerDay} cars per day.</small></p>
                </div>
            `;
            
            resultsDiv.innerHTML = resultsHTML;
            
            // Show print button when we have valid results
            document.getElementById('printButtonContainer').style.display = 'block';
        }
    </script>
</body>
</html>
